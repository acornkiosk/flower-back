<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="order">
	<insert id="insert" parameterType="orderDto">
		INSERT INTO CART
		(	
			ORDER_ID
			,ID
			,KIOSK_ID
			,MENU_NAME
			,MENU_PRICE
			,MENU_COUNT
			,OPTIONS
			,REGDATE
		)
		VALUES
		(
			#{order_id}
			,seq_order_id.nextval
			,#{kiosk_id}
			,#{menu_name}
			,#{menu_price}
			,#{menu_count}
			,#{options}
			,SYSDATE
		)
	</insert>

	<select id="getOrder" parameterType="orderDto" resultType="orderDto">
		SELECT 
			ORDER_ID
			,ID
			,KIOSK_ID
			,MENU_NAME
			,MENU_PRICE
			,MENU_COUNT
			,OPTIONS
			,REGDATE
		FROM 
			CART
		WHERE 
			ID = #{id}
	</select>
	
	<select id="getOrders" parameterType="orderDto" resultType="orderDto">
		SELECT 
			ORDER_ID
			,ID
			,KIOSK_ID
			,MENU_NAME
			,MENU_PRICE
			,MENU_COUNT
			,OPTIONS
			,REGDATE
		FROM 
			CART
		<if test="order_id != 0">
		WHERE 
			ORDER_ID = #{order_id}
		</if>
	</select>
	
	<delete id="delete" parameterType="orderDto">
		DELETE FROM CART
		WHERE id= #{id}
	</delete>
	
	<update id="update" parameterType="orderDto">
		UPDATE CART 
		SET 
			MENU_PRICE = #{menu_price}
			,MENU_COUNT = #{menu_count}
			,OPTIONS =  #{options}
		WHERE id=#{id}
	</update>
</mapper>